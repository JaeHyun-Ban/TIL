# Chapter 6

## 서브쿼리

셀렉트된 쿼리가 또다른 쿼리에 들어간다

서브쿼리는 다른 SELECT 문장의 절에 내장된 SELCET 문장이다.
WHERE조건에 SELECT 조건문을 소괄호로 묶어서 사용한다
테이블 자체의 데이터에 의존하는 조건으로 테이블행을 검색할 필요가 있을 때 서브쿼리는 아주 유용하다

### 다음의 SQL절에 서브쿼리를 작성할 수 있다

- SELECT 절(스칼라 서브쿼리)
- FROM 절(인라인 뷰)
- WHERE 절
- HAVING 절
- ORDER BY 절
- INSERT 문의 VALUES 절
- UPDATE 문의 SET 절
- CREATE TABLE 문의 AS 절

### 서브쿼리를 사용할 때 지켜야할 사항들

- 서브쿼리는 괄호로 둘러싸야 한다
- 서브쿼리는 비교 연산자의 오른쪽에 있어야 한다

---

## 단일 행 서브쿼리

내부 SELECT 문장으로 부터 하나의 행을 리턴하는 질의이다.

서브쿼리 결과가 2개 행 이상일 경우 다중 행 서브쿼리라고 부른다.
**이때 사용되는 연산자가 다르다**

- `IN`: 목록의 어떤 값과 같은지 확인한다
  - **가장 많이 쓰인다**
- `ANY, SOME`: 값을 서브쿼리에 의해 리턴된 각각의 값과 비교, **하나라도 만족하면 된다**
- `ALL`: 값을 서브쿼리에 의해 리턴된 모든 값과 비교, **모든 값과 비교해서 만족해야 한다.**

- ALL과 ANY의 차이
  - `< ANY`: 가장 큰 값보다 작으면 안된다
  - `> ANY`: 가장 작은 값보다 크면 된다.
  - `< ALL`: 가장 작은 값보다 작아야 된다
  - `> ALL`: 가장 큰 값보다 커야 한다
  - `= ANY`: IN과 같은 역할을 한다.

---

## 스칼라(Scalar) 서브쿼리

`SELECT`절에 서브쿼리가 온 것이다
특히 `JOIN`을 수행할 시 조인할 행의 수를 줄여 성능을 향상시켜준다

---

## 인라인 뷰(Inline View)★★★

`FROM절`에 **서브쿼리가 온 것**을 인라인 뷰 라고 한다.
서브쿼리를 FROM절에 사용해 하나의 테이블 또는 뷰처럼 사용할 수 있다.

> 인라인 뷰를 이용할 때 미리 정렬을 해놓으면 편리하다

**추후 게시판 페이징에 이용가능한 알아두어야 하는 쿼리중 하나이다**

---

#### 메모장
