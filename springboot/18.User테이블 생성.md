# ğŸš€ ëª©í‘œ - ëŒ€ëŒ“ê¸€ X, ëŒ“ê¸€ì˜ ëŒ“ê¸€ê¹Œì§€ êµ¬í˜„ ëª©í‘œ

## Blog í…Œì´ë¸” ë§Œë“¤ê¸°(User, Board, Reply)

### ğŸ“Œ ORMì´ë€

JAVA(or ë‹¤ë¥¸ì–¸ì–´) Object(ê°ì²´)ë¥¼ í…Œì´ë¸”ë¡œ Mappingí•´ì£¼ëŠ” ê¸°ìˆ 
ì´ê³³ì—ì„œ í…Œì´ë¸”ëª…ì„ ë³€ê²½í•´ì£¼ë©´ Springbootì‹¤í–‰ì‹œ ìë™ìœ¼ë¡œ ê´€ë¦¬í•´ ë³€ê²½í•´ì¤€ë‹¤.

```java
@Entity
public class User {
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private int id;

  @Column(nullable = false, length = 30)
  private String username;

  @Column(nullable = false, length = 100)
  private String password;

  @Column(nullable = false, length = 50)
  private String email;

  @ColumnDefault("'user'")
  private String role;

  @CreationTimestamp
  private Timestamp createDate;

  private Timestamp updateDate;
}

```

### ğŸ“š ì–´ë…¸í…Œì´ì…˜

#### @Entity

ìƒì„±í•œ í´ë˜ìŠ¤ë¥¼ SpringBootì‹¤í–‰ì‹œ ì½ì–´ì£¼ì–´ DBì— ìë™ìœ¼ë¡œ í…Œì´ë¸”ì„ ìƒì„±í•´ì¤€ë‹¤.

#### @Id

í•´ë‹¹ ë³€ìˆ˜ë¥¼ í…Œì´ë¸” PKë¡œ ì§€ì •

#### @GeneratedValue

PKì™€ í•¨ê»˜ì“°ì¸ë‹¤.(@Id)
ë„˜ë²„ë§ ìƒì„± ì „ëµì„ ëª…ì‹œí•˜ëŠ”ë° ì‚¬ìš©ë¨

```java
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private int id;
```

- IDENTITY: í”„ë¡œì íŠ¸ì—ì„œ **ì—°ê²°ëœ DBì˜ ë„˜ë²„ë§ ì „ëµ**ì„ ë”°ë¼ê°„ë‹¤
  - ORACLEì´ë¼ë©´ sequence
  - MySQLì´ë¼ë©´ auto_increment

#### @Column

í…Œì´ë¸”ì˜ ì¹¼ëŸ¼ì´ë¼ëŠ” í‘œì‹œ
í•„ìˆ˜ë¡œ ì„¤ì •í•´ì•¼ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³  í•„ìš”í•œ ì»¬ëŸ¼ ì˜µì…˜ë§Œ ì‘ì„±í•˜ë©´ ëœë‹¤.

```yml
jpa:
  open-in-view: true
  hibernate:
    # ddl-auto ì¬í™•ì¸ í•„ìš”
    # createë¼ë©´ ì‹¤í–‰ ì‹œ ë§ˆë‹¤ í…Œì´ë¸”ì´ ìƒˆë¡œ ìƒì„±ë¨
    # ìµœì´ˆ 1íšŒ ì‹¤í–‰ => create, ì´í›„ ì‹¤í–‰ => update
    ddl-auto: create
    naming:
      # PhysicalNamingStrategyStandardImpl=>@Entityë¥¼ ìƒì„±ì‹œ ìƒì„±í•œ ë³€ìˆ˜ëª… ê·¸ëŒ€ë¡œ í…Œì´ë¸”ì„ ìƒì„±í•˜ê¸°
      # SpringPhysicalNamingStrategy=>ì¹´ë©œí‘œê¸°ë²•(myName)ì„ ì–¸ë”ìŠ¤ì½”ì–´+ì†Œë¬¸ì(my_name)ë¡œ ë°”ê¿”ì¤€ë‹¤
      physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    use-new-id-generator-mappings: false
    #>ì‹œí€€ìŠ¤ì˜ ë°©ì‹ì„ ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€, true-jpaì˜ ë„˜ë²„ë§ ì „ëµ ì‚¬ìš©
    #>false->jpaì˜ ê¸°ë³¸ì„ ë”°ë¼ê°€ì§€ ì•Šê²Ÿë‹¤
  show-sql: true
  #>>show-sql:trueëŠ” sqlì„ ì½˜ì†”ì— ì¶œë ¥í•´ì¤€ë‹¤
  properties:
    hibernate.format_sql: true
```

>

### ì¶”ê°€ í•™ìŠµ

@CreationTimestamp

java - enum

```yml
jpa:
  open-in-view: true
  hibernate:
    # ddl-auto ì¬í™•ì¸ í•„ìš”
    # createë¼ë©´ ì‹¤í–‰ ì‹œ ë§ˆë‹¤ í…Œì´ë¸”ì´ ìƒˆë¡œ ìƒì„±ë¨
    # ìµœì´ˆ 1íšŒ ì‹¤í–‰ => create, ì´í›„ ì‹¤í–‰ => update
    ddl-auto: create
    naming:
      # PhysicalNamingStrategyStandardImpl=>@Entityë¥¼ ìƒì„±ì‹œ ìƒì„±í•œ ë³€ìˆ˜ëª… ê·¸ëŒ€ë¡œ í…Œì´ë¸”ì„ ìƒì„±í•˜ê¸°
      # SpringPhysicalNamingStrategy=>ì¹´ë©œí‘œê¸°ë²•(myName)ì„ ì–¸ë”ìŠ¤ì½”ì–´+ì†Œë¬¸ì(my_name)ë¡œ ë°”ê¿”ì¤€ë‹¤
      physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    use-new-id-generator-mappings: false
    #>ì‹œí€€ìŠ¤ì˜ ë°©ì‹ì„ ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€, true-jpaì˜ ë„˜ë²„ë§ ì „ëµ ì‚¬ìš©
    #>false->jpaì˜ ê¸°ë³¸ì„ ë”°ë¼ê°€ì§€ ì•Šê²Ÿë‹¤
  show-sql: true
  #>>show-sql:trueëŠ” sqlì„ ì½˜ì†”ì— ì¶œë ¥í•´ì¤€ë‹¤
  properties:
    hibernate.format_sql: true
```
