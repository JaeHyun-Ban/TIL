# ğŸš€ ëª©í‘œ - ëŒ€ëŒ“ê¸€ X, ëŒ“ê¸€ì˜ ëŒ“ê¸€ê¹Œì§€ êµ¬í˜„

## Blog í…Œì´ë¸” ë§Œë“¤ê¸°(User, Board, Reply)

### ğŸ“Œ ORMì´ë€

JAVA(or ë‹¤ë¥¸ì–¸ì–´) Object(ê°ì²´)ë¥¼ í…Œì´ë¸”ë¡œ Mappingí•´ì£¼ëŠ” ê¸°ìˆ 
ì´ê³³ì—ì„œ í…Œì´ë¸”ëª…ì„ ë³€ê²½í•´ì£¼ë©´ Springbootì‹¤í–‰ì‹œ ìë™ìœ¼ë¡œ ê´€ë¦¬í•´ ë³€ê²½í•´ì¤€ë‹¤.

```java
@Entity
public class User {
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private int id;

  @Column(nullable = false, length = 30)
  private String username;

  @Column(nullable = false, length = 100)
  private String password;

  @Column(nullable = false, length = 50)
  private String email;

  @ColumnDefault("'user'")
  private String role;

  @CreationTimestamp
  private Timestamp createDate;

  private Timestamp updateDate;
}

```

### ğŸ“š ì–´ë…¸í…Œì´ì…˜

#### @Entity

ìƒì„±í•œ í´ë˜ìŠ¤ë¥¼ SpringBootì‹¤í–‰ì‹œ ì½ì–´ì£¼ì–´ DBì— ìë™ìœ¼ë¡œ í…Œì´ë¸”ì„ ìƒì„±í•´ì¤€ë‹¤.

- ì†ì„± - @Entity(name = "User")
  JPAì—ì„œ ì‚¬ìš©í•  ì—”í‹°í‹° ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
  ê°™ì€ í´ë˜ìŠ¤ ì´ë¦„ì´ ì—†ë‹¤ë©´ ê°€ê¸‰ì  ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ì.

#### @Id

í•´ë‹¹ ë³€ìˆ˜ë¥¼ í…Œì´ë¸” PKë¡œ ì§€ì •

#### @GeneratedValue

PKì™€ í•¨ê»˜ì“°ì¸ë‹¤.(@Id)
ë„˜ë²„ë§ ìƒì„± ì „ëµì„ ëª…ì‹œí•˜ëŠ”ë° ì‚¬ìš©ë¨

```java
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private int id;
```

- IDENTITY: í”„ë¡œì íŠ¸ì—ì„œ **ì—°ê²°ëœ DBì˜ ë„˜ë²„ë§ ì „ëµ**ì„ ë”°ë¼ê°„ë‹¤
  - ORACLEì´ë¼ë©´ sequence
  - MySQLì´ë¼ë©´ auto_increment

#### @Column

í…Œì´ë¸”ì˜ ì¹¼ëŸ¼ì´ë¼ëŠ” í‘œì‹œ
í•„ìˆ˜ë¡œ ì„¤ì •í•´ì•¼ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³  í•„ìš”í•œ ì»¬ëŸ¼ ì˜µì…˜ë§Œ ì‘ì„±í•˜ë©´ ëœë‹¤.

#### @CreationTimestamp

JPAê°€ ì•„ë‹Œ `org.hibernate`ì—ì„œ ì§€ì›í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜
ìƒì„±ì‹œì˜ íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ê¸°ë¡í•´ì¤€ë‹¤.

### UpdateTimestamp

ì—…ë°ì´íŠ¸ê¸°ì˜ ë‚ ì§œë¥¼ ê¸°ë¡í•´ì¤€ë‹¤.

### application.yml

---

### ymlì„¤ì • íŒŒì¼

```yml
jpa:
  open-in-view: true
  hibernate:
    ddl-auto: create
    naming:
      physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    use-new-id-generator-mappings: false
  show-sql: true
  properties:
    hibernate.format_sql: true
```

#### ddl-auto: (ìƒíƒœ)

create - ìŠ¤í”„ë§ë¶€íŠ¸ ì‹¤í–‰ ì‹œ ë§ˆë‹¤ í…Œì´ë¸”ì´ ìƒˆë¡œ ìƒì„±ë¨
update - ìŠ¤í”„ë§ë¶€íŠ¸ ì‹¤í–‰ ì‹œ ìƒì„±ëœ í…Œì´ë¸”ì„ ì—…ë°ì´íŠ¸í•œë‹¤
ğŸ“Œ ë”°ë¼ì„œ ìµœì†Œ 1íšŒ create ì‹¤í–‰ ì´í›„ updateë¡œ ë°”ê¿”ì¤„ ê²ƒ

#### nameing: ìƒíƒœ

ì´ë¦„ìƒì„± í˜•íƒœë¥¼ ì„¤ì •í•˜ëŠ”ê³³

PhysicalNamingStrategyStandardImpl

- @Entityë¥¼ ì‹¤í–‰ì‹œ ìƒì„±í•œ ë³€ìˆ˜ëª…ì„ ê·¸ëŒ€ë¡œ í…Œì´ë¸”ì„ ìƒì„±í•œë‹¤.

SpringPhysicalNamingStrategy

- ì¹´ë©œí‘œê¸°ë²•(myName)ì„ ì–¸ë”ìŠ¤ì½”ì–´+ì†Œë¬¸ì(my_name)ìœ¼ë¡œ ë°”ê¿”ì„œ ìƒì„±í•œë‹¤.

##### show-sql: true

sqlë¬¸ì„ ì½˜ì†”ì— ì¶œë ¥í•´ì¤€ë‹¤.

#### hibernate.format_sql: true

sqlë¬¸ì´ í•œì¤„ë¡œ ì£¼ë¥´ë¥µ ì¶œë ¥ë˜ëŠ”ê²ƒì„ ë³´ê¸° ì¢‹ê²Œ ì½˜ì†”ì°½ì— ë³´ì—¬ì¤Œ

> show-sqlê³¼ í•¨ê¼ ì“°ì¸ë‹¤

```
Hibernate:
    create table User (
       id integer not null auto_increment,
        createDate datetime(6),
        email varchar(50) not null,
        password varchar(100) not null,
        role varchar(255) default 'user',
        updateDate datetime(6),
        username varchar(30) not null,
        primary key (id)
    ) engine=InnoDB
```
